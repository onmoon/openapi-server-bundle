<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>
        <defaults autoconfigure="true" autowire="true" public="false" />
        <service id="Lukasoppermann\Httpstatus\Httpstatus" />
        <service id="sspat\ReservedWords\ReservedWords" />
        <service id="OnMoon\OpenApiServerBundle\Router\RouteLoader">
            <tag name="routing.loader" />
        </service>
        <service id="League\OpenAPIValidation\PSR7\ValidatorBuilder" />
        <service id="Nyholm\Psr7\Factory\Psr17Factory" />
        <service id="Symfony\Bridge\PsrHttpMessage\Factory\PsrHttpFactory">
            <argument key="$serverRequestFactory" type="service" id="Nyholm\Psr7\Factory\Psr17Factory" />
            <argument key="$streamFactory" type="service" id="Nyholm\Psr7\Factory\Psr17Factory" />
            <argument key="$uploadedFileFactory" type="service" id="Nyholm\Psr7\Factory\Psr17Factory" />
            <argument key="$responseFactory" type="service" id="Nyholm\Psr7\Factory\Psr17Factory" />
        </service>
        <service id="OnMoon\OpenApiServerBundle\Validator\RequestSchemaValidator" class="OnMoon\OpenApiServerBundle\Validator\LeaguePSR7RequestSchemaValidator" />
        <service id="OnMoon\OpenApiServerBundle\Controller\ApiController">
            <tag name="controller.service_arguments" />
        </service>
        <service id="OnMoon\OpenApiServerBundle\OpenApi\ArgumentResolver" />
        <service id="OnMoon\OpenApiServerBundle\OpenApi\ScalarTypesResolver" />
        <service id="PhpParser\BuilderFactory" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\Naming\NamingStrategy" class="OnMoon\OpenApiServerBundle\CodeGenerator\Naming\DefaultNamingStrategy">
            <argument key="$rootNamespace">%openapi.generated.code.root.namespace%</argument>
            <argument key="$languageLevel">%openapi.generated.code.language.level%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\Dto\RequestDtoFactory" class="OnMoon\OpenApiServerBundle\CodeGenerator\Dto\PhpParserRequestDtoFactory" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\Dto\DtoFactory" class="OnMoon\OpenApiServerBundle\CodeGenerator\Dto\PhpParserDtoFactory">
            <argument key="$languageLevel">%openapi.generated.code.language.level%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\DtoCodeGenerator">
            <argument key="$languageLevel">%openapi.generated.code.language.level%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\InterfaceCodeGenerator">
            <argument key="$languageLevel">%openapi.generated.code.language.level%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\RequestHandlerInterface\RequestHandlerInterfaceFactory" class="OnMoon\OpenApiServerBundle\CodeGenerator\RequestHandlerInterface\PhpParserRequestHandlerInterfaceFactory" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\ServiceSubscriber\ServiceSubscriberFactory" class="OnMoon\OpenApiServerBundle\CodeGenerator\ServiceSubscriber\PhpParserServiceSubscriberFactory" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\Filesystem\FileWriter" class="OnMoon\OpenApiServerBundle\CodeGenerator\Filesystem\FilePutContentsFileWriter">
            <argument key="$dirPemissions">%openapi.generated.code.dir.permissions%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\Command\GenerateApiCodeCommand">
            <argument key="$rootPath">%openapi.generated.code.root.path%</argument>
            <argument key="$cache" type="service" id="cache.app.taggable" />
        </service>
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\ApiServerCodeGenerator">
            <argument key="$rootNamespace">%openapi.generated.code.root.namespace%</argument>
            <argument key="$rootPath">%openapi.generated.code.root.path%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\Command\DeleteGeneratedCodeCommand">
            <argument key="$rootPath">%openapi.generated.code.root.path%</argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\Command\RefreshApiCodeCommand">
            <argument key="$rootPath">%openapi.generated.code.root.path%</argument>
        </service>
        <service id="Symfony\Component\PropertyInfo\Extractor\PhpDocExtractor" />
        <service id="Symfony\Component\Serializer\Normalizer\PropertyNormalizer">
            <argument key="$propertyTypeExtractor" type="service" id="Symfony\Component\PropertyInfo\Extractor\PhpDocExtractor" />
        </service>
        <service id="Symfony\Component\Serializer\Normalizer\DateTimeNormalizer" />
        <service id="Symfony\Component\Serializer\Normalizer\ArrayDenormalizer" />
        <service id="Symfony\Component\Serializer\Encoder\JsonEncoder" />
        <service id="openapi.bundle.serializer" class="Symfony\Component\Serializer\Serializer">
            <argument key="$normalizers" type="collection">
                <argument type="service" id="Symfony\Component\Serializer\Normalizer\PropertyNormalizer" />
                <argument type="service" id="Symfony\Component\Serializer\Normalizer\DateTimeNormalizer" />
                <argument type="service" id="Symfony\Component\Serializer\Normalizer\ArrayDenormalizer" />
            </argument>
            <argument key="$encoders" type="collection">
                <argument type="service" id="Symfony\Component\Serializer\Encoder\JsonEncoder" />
            </argument>
        </service>
        <service id="OnMoon\OpenApiServerBundle\Serializer\DtoSerializer" class="OnMoon\OpenApiServerBundle\Serializer\ReflectionDtoSerializer">
            <argument key="$serializer" type="service" id="openapi.bundle.serializer" />
        </service>
        <service id="OnMoon\OpenApiServerBundle\Specification\SpecificationLoader">
            <argument key="$locator" type="service" id="file_locator" />
            <argument key="$cache" type="service" id="cache.app.taggable" />
        </service>
        <service id="OnMoon\OpenApiServerBundle\Mapper\DtoMapper" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\GraphGenerator" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\InterfaceGenerator" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\AttributeGenerator" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\FileGenerator" />
        <service id="OnMoon\OpenApiServerBundle\CodeGenerator\NameGenerator">
            <argument key="$rootNamespace">%openapi.generated.code.root.namespace%</argument>
            <argument key="$rootPath">%openapi.generated.code.root.path%</argument>
        </service>
    </services>
</container>
